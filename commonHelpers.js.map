{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('#input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet currentPage = 1;\nlet searchQuery = '';\n\nloader.style.display = 'none';\nloadMoreBtn.style.display = 'none';\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  searchQuery = input.value.trim();\n  gallery.innerHTML = '';\n  input.value = '';\n  loader.style.display = 'block';\n  currentPage = 1;\n  loadMoreBtn.style.display = 'none';\n\n  await performSearch();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  loader.style.display = 'block';\n  await performSearch();\n});\n\nasync function performSearch() {\n  const searchParams = new URLSearchParams({\n    key: '41494285-2be0c6d487dc7750955372a82',\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: currentPage,\n    per_page: 40,\n  });\n\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n\n    if (!response.data.hits || !response.data.hits.length) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        theme: 'dark',\n        backgroundColor: '#EF4040',\n        titleColor: 'white',\n        messageSize: '16',\n        titleSize: '16',\n        position: 'topRight',\n        maxWidth: 430,\n      });\n    } else {\n      const imgs = response.data.hits.reduce(\n        (\n          html,\n          {\n            webformatURL,\n            largeImageURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n          }\n        ) =>\n          html +\n          `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>          \n          <div class=\"description\">\n            <p>Likes:<span>${likes}</span></p>\n            <p>Views:<span>${views}</span></p>\n            <p>Comments:<span>${comments}</span></p>\n            <p>Downloads:<span>${downloads}</span></p>\n          </div> \n        </li>`,\n        ''\n      );\n\n      gallery.innerHTML += imgs;\n\n      let modal = new simpleLightbox('ul.gallery a', {\n        captionDelay: 250,\n        captionsData: 'alt',\n      });\n\n      modal.refresh();\n\n      // Display Load More button if there are more pages\n      if (response.data.totalHits > currentPage * 40) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n      }\n\n      currentPage++;\n    }\n  } catch (err) {\n    loader.style.display = 'none';\n    console.log(err);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n"],"names":["form","input","gallery","loader","loadMoreBtn","currentPage","searchQuery","event","performSearch","searchParams","response","axios","iziToast","imgs","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","simpleLightbox","err"],"mappings":"owBAOA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAc,EACdC,EAAc,GAElBH,EAAO,MAAM,QAAU,OACvBC,EAAY,MAAM,QAAU,OAE5BJ,EAAK,iBAAiB,SAAU,MAAMO,GAAS,CAC7CA,EAAM,eAAc,EACpBD,EAAcL,EAAM,MAAM,OAC1BC,EAAQ,UAAY,GACpBD,EAAM,MAAQ,GACdE,EAAO,MAAM,QAAU,QACvBE,EAAc,EACdD,EAAY,MAAM,QAAU,OAE5B,MAAMI,EAAa,CACrB,CAAC,EAEDJ,EAAY,iBAAiB,QAAS,SAAY,CAChDD,EAAO,MAAM,QAAU,QACvB,MAAMK,EAAa,CACrB,CAAC,EAED,eAAeA,GAAgB,CAC7B,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMD,EACN,SAAU,EACd,CAAG,EAED,GAAI,CACF,MAAMK,EAAW,MAAMC,EAAM,IAC3B,4BAA4BF,GAClC,EAEI,GAAI,CAACC,EAAS,KAAK,MAAQ,CAACA,EAAS,KAAK,KAAK,OAC7CE,EAAS,MAAM,CACb,QACE,2EACF,MAAO,OACP,gBAAiB,UACjB,WAAY,QACZ,YAAa,KACb,UAAW,KACX,SAAU,WACV,SAAU,GAClB,CAAO,MACI,CACL,MAAMC,EAAOH,EAAS,KAAK,KAAK,OAC9B,CACEI,EACA,CACE,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IAEDP,EACA;AAAA,0CACgCE;AAAA,8CACID,WAAsBE;AAAA;AAAA;AAAA,6BAGvCC;AAAA,6BACAC;AAAA,gCACGC;AAAA,iCACCC;AAAA;AAAA,eAGzB,EACR,EAEMnB,EAAQ,WAAaW,EAET,IAAIS,EAAe,eAAgB,CAC7C,aAAc,IACd,aAAc,KACtB,CAAO,EAEK,QAAO,EAGTZ,EAAS,KAAK,UAAYL,EAAc,GAC1CD,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,OAG9BC,GACD,CACF,OAAQkB,EAAP,CACApB,EAAO,MAAM,QAAU,OACvB,QAAQ,IAAIoB,CAAG,CACnB,QAAY,CACRpB,EAAO,MAAM,QAAU,MACxB,CACH"}